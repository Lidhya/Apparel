<head>
    <!-- Custom styles -->
  <link rel="stylesheet" href="/stylesheets/admin.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js" integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
    crossorigin="anonymous"></script>
</head>
<body>
    
  <!--Main layout-->
  <main class="pt-5">
    <div class="container pt-4">


       <!--Section: Statistics with subtitles-->
      <section>
        <div class="row">

        </div>
        <div class="row">
          <div class="col-xl-6 col-md-12 mb-4">
            <div class="card">
              <div class="card-body">
                <div class="d-flex justify-content-between p-md-1">
                  <div class="d-flex flex-row">
                    <div class="align-self-center">
                      <h2 class="h1 mb-0 me-4">&#x20b9;{{details.revenue}}</h2>
                    </div>
                    <div>
                      <h4>Total Sales</h4>
                      <p class="mb-0">Sales Amount</p>
                    </div>
                  </div>
                  <div class="align-self-center">
                    <i class="far fa-heart text-danger fa-3x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-6 col-md-12 mb-4">
            <div class="card">
              <div class="card-body">
                <div class="d-flex justify-content-between p-md-1">
                  <div class="d-flex flex-row">
                    <div class="align-self-center">
                      <h2 class="h1 mb-0 me-4">{{details.totalUsers}}</h2>
                    </div>
                    <div>
                      <h4>Total customers</h4>
                      <p class="mb-0">User report</p>
                    </div>
                  </div>
                  <div class="align-self-center">
                    <i class="fa-solid fa-user text-success fa-3x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!--Section: Statistics with subtitles-->

<div class="row align-items-center">
      <!-- Section: Main chart -->
      <section class="mb-4 col-md-7 ">
        <div class="card ">
          <div class="card-header py-3">
            <h5 class="mb-0 text-center"><strong>Sales</strong></h5>
          </div>
          <div class="card-body">
            <canvas class="my-4 w-100" id="myChart" height="380"></canvas>
          </div>
        </div>
      </section>
      <!-- Section: Main chart -->

  <!-- Section: pie chart -->
       <section class="mb-4 col-md-5 ">
        <div class="card ">
          <div class="card-header py-3">
            <h5 class="mb-0 text-center"><strong>Payments</strong></h5>
          </div>
          <div class="card-body">
            <canvas class="my-4 w-100" id="Chart" height="380"></canvas>
          </div>
        </div>
      </section>
        <!-- Section: pie chart -->
</div>
    

                      <!--Section: Sales Performance KPIs-->
      <section class="mb-4">
        <div class="card">
          <div class="card-header text-center py-3">
            <h5 class="mb-0 text-center">
              <strong>Sales Report</strong>
            </h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover text-nowrap" id="myTable">
                <thead>
                  <tr>
                    <th scope="col"></th>
                    <th scope="col">Products sold</th>
                    <th scope="col">Revenue</th>
                    <th scope="col">COD</th>
                    <th scope="col">Razorpay</th>
                    <th scope="col">Paypal</th>
                    <th scope="col">Avg. Revenue</th>
                    
                    <th scope="col">Orders delivered</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row">Daily</th>
                    <td class="text-dark">{{details.dailyProductsCount}}</td>
                    <td>{{details.dailySale}}</td>
                    <td>{{details.dailyCodCount}}</td>
                    <td>{{details.dailyRazorCount}}</td>
                    <td>{{details.dailyPaypalCount}}</td>
                    <td>{{details.dailyAvgRevenue}}</td>
                  
                    <td>{{details.dailySalesCount}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Weekly</th>
                    <td>
                      <span class="text-dark">
                       <span>{{details.productsCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.revenue}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.codCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.razorCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.paypalCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.avgRevenue}}</span>
                      </span>
                    </td>
                   
                    <td>
                      <span class="text-dark">
                       <span>{{details.salesCount}}</span>
                      </span>
                    </td>
                   
                    
                  </tr>
                  <tr>
                    <th scope="row">Yearly</th>
                    <td>
                      <span class="text-dark">
                       <span>{{details.productsCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.revenue}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.codCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.razorCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.paypalCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.avgRevenue}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.OrderCount}}</span>
                      </span>
                    </td>
                    <td>
                      <span class="text-dark">
                       <span>{{details.salesCount}}</span>
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      <!--Section: Sales Performance KPIs-->
      

     
    </div>
  </main>
  <!--Main layout-->

  <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.2/js/buttons.print.min.js"></script>

    <script type="text/javascript" charset="utf-8">
        $(document).ready(function () {
            $('#myTable').DataTable({
               rowReorder: {
            selector: 'td:nth-child(2)'
        },
        responsive: true,
                dom: 'Bfrtip',
                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ]
            });
        });
    </script>

</body>

<script>
   // Graph
var ctx = document.getElementById("myChart");
var ct = document.getElementById("Chart");
 var Orderdate= []                            
var revenueData=[]
  $(window).on('load',function(){
     $.ajax({
        url:'/admin/get-report',
        method:'get',
        success:(details)=>{
         Orderdate=details.date1
         revenueData=details.total1
         revenueData.reverse()
         Orderdate.reverse()
        }
  })

setTimeout(()=>{
var myChart = new Chart(ctx, {
  type: "bar",
  data: {
    labels: Orderdate,
    datasets: [
      {
        label:"Daily Sales",
        data: revenueData,
        lineTension: 0,
        backgroundColor: 'blue',
        pointBackgroundColor: "#007bff",
      },
    ],
  },
  options: {
    scales: {
     
      yAxes: [
        {
          ticks: {
            beginAtZero: false,
          },
        },
      ],
    },
    legend: {
      display: false,
    },
  },
});

},300)
  })

 


console.log(Orderdate)
new Chart(ct, {
            type: "pie",
            data: {
                labels:  [
      "COD",
      "Razorpay",
      "Paypal"
    ],
                datasets: [{
               backgroundColor:  ["#c2a691", "#fa003f", "#242423"],
                    data:[{{details.codCount}}, {{details.razorCount}}, {{details.paypalCount}}]
                }]
            },
            options: {
                title: {
                    display: true,
                }
            }
        });




 
</script>