<style>
  .head {
    background-color: #14213d;
  }

  p {
    all: unset;
  }
</style>
{{#if orders}}
<section class="h-100 pt-3">
  <div class="container h-100 py-5">
    <div class="row d-flex justify-content-center  h-100">
      <h3 class="fw-normal mb-0 mt-5 pb-3 text-black text-uppercase">Orders</h3>
      <div class="col-12 mt-4">

        {{#each orders}}
        <div class="card rounded-5 mb-5">
          <div class="card-body px-0 pt-0">
            <div class="d-flex head flex-wrap align-items-center p-3 justify-content-around text-white rounded-top">
              <p class="my-auto mx-auto">Order placed on {{this.date}}</p>
              {{#if this.cancel}}
              <p class="my-auto mx-auto">Payment Cancelled</p>
              {{else}}
              <p class="my-auto mx-auto">Payment is {{this.status}} </p>
              {{/if}}
              <p class="my-auto mx-auto">Total spend &#x20b9;{{this.total}}</p>
              <p class="my-auto mx-auto">Payment:{{this.payment_method}}</p>
              {{#if this.cancel}}
              <p class="my-auto mx-auto fw-bold">Status: cancelled</p>
              {{else}}
              <a class="btn btn-danger p-2" onclick="confirmation('{{this._id}}')">Cancel order</a>
              {{/if}}

            </div>


            {{#each this.products}}
            {{!-- ------------ --}}
            <div class="row d-flex justify-content-around align-items-center ms-1">

              <div class="col-md-4 col-xl-4 ">
                <img style="height: 5rem; width: 5rem;" class="m-2 rounded-5" src="/product-images/{{item}}.jpg"
                  alt="product image">
                  <a href="/product-details/{{item}}" class="text-dark"> <p class="lead fw-normal mb-2">{{name}}</p></a>
              </div>

              <div class="col-md-2 col-lg-2 col-xl-2">
                <p class="lead fw-normal mb-2">{{../this.delivery_details.address}}</p>
              </div>

              <div class="col-md-2 col-lg-2 col-xl-2">
                <p class="lead fw-normal mb-2">{{../this.delivery_details.phone}}</p>
              </div>

            </div>
            {{!-- ----------- --}}
            {{/each}}

           
          </div>
        </div>
        {{/each}}

         
      </div>
    </div>
  </div>
  </div>
</section>

{{else}}
<div class="container pt-5">
  <div class="col-md-12 pt-5">
    <div class="card mb-4">
      <div class="card-body">

        <div class="d-flex flex-column justify-content-center align-items-center">
          <h3 class="fw-light text-uppercase">Your orders is empty</h3>
          <img style="width: 20rem; height: 20rem;" src="/images/Add to Cart-amico.png" alt="">
        </div>
      </div>
    </div>
  </div>

</div>
{{/if}}

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  function confirmation(id) {
    Swal.fire({
      title: 'Are you sure?',
      text: "You won't be able to revert this!",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, cancel it!'
    }).then((result) => {
      if (result.isConfirmed) {
        location.href = `/cancel-order/${id}`
      }

    })
  }
</script>